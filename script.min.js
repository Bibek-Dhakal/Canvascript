const A=a=>typeof a==='number';var _=document.querySelector('.canvas'),c=document.querySelector('.reset'),d=document.querySelector('.generate'),B=document.querySelector('.redo'),f=document.querySelector('.setBtn'),g=_.getContext('2d'),h=document.querySelector('.copy'),I=document.querySelector('.design'),j=document.querySelector('.user-design'),k=document.querySelector('.save'),l=localStorage.getItem('canvasArray'),m=e=>{aC();aG();aD();X(e)};let N=1;let o='#000000';let p;let q;let x;let y;let t=-1;let u=[];let v=!1;let w;function X(C){g.beginPath();g.strokeStyle=o;g.lineWidth=N>0?N:0;g.moveTo(x,y);g.lineTo(C.offsetX,C.offsetY);g.stroke()}function Y(n){return A(n)}function z(){I.select();I.setSelectionRange(0,99999999);navigator.clipboard.writeText(JSON.stringify(u))}function aA(){u.length===0?I.value='[ ]':I.value=JSON.stringify(u);}function aB(){for(let i=0;i<4;i++)u.pop();t-=4}function aC(){g.clearRect(0,0,_.width,_.height)};function aD(){let i=0;g.beginPath();g.strokeStyle='#000000';g.lineWidth=1;while (i<u.length) {let _a=u[i];let _b=u[i+1];if(Y(_a)&&Y(_b)){g.moveTo(_a,_b);g.lineTo(u[i+2],u[i+3]);i+=4}else{if(!(Y(_a)||Y(_b))){g.stroke();g.beginPath();g.strokeStyle=_a;g.lineWidth=+_b;i+=2}else{Math.sign(_a)?(g.stroke(),g.beginPath(),g.lineWidth=_a,i++):(g.stroke(),g.beginPath(),g.strokeStyle=_a,i++);}}};g.stroke()};function aE(){var D=document.querySelector('.space'),_B=document.createRange(),_c=window.getSelection();let i=0;D.innerHTML='';D.innerHTML+=`<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '#000000';</div><div>ctx.lineWidth = 1;</div>`;while (i<u.length) {let _A=u[i];let E=u[i+1];if(Y(_A)&&Y(E)){D.innerHTML+=`<div>ctx.moveTo(${_A}, ${E});</div>`;D.innerHTML+=`<div>ctx.lineTo(${u[i+2]}, ${u[i+3]});</div>`;i+=4}else{if(!(Y(_A)||Y(E))){D.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${_A}';</div>`;D.innerHTML+=`<div>ctx.lineWidth = '${E}';</div>`;i+=2}else{Math.sign(_A)?(D.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = '${_A}';</div>`,i++):(D.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${_A}';</div>`,i++);}}};D.innerHTML+='<div>ctx.stroke();</div>';_c.removeAllRanges();_B.selectNodeContents(D);_c.addRange(_B)};function aF(aH,...aI){aH==='def'?(height=window.innerHeight,width=window.innerWidth,_.width=(width/100)*70,_.height=(height/100)*72.5):(_.width=aI[0],_.height=aI[1])}function aG(){var aJ=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);p=document.querySelector('.width').value||_.width;q=document.querySelector('.height').value||_.height;g.beginPath();g.strokeStyle='#AAAAAA';g.lineWidth=1;for(let x=0;x<=p;x+=aJ){g.moveTo(x,0);g.lineTo(x,q)}for(let y=0;y<=q;y+=aJ){g.moveTo(0,y);g.lineTo(p,y)}g.stroke()}aF('def');aG();l!==null&&(u=JSON.parse(l),aD());aA();window.addEventListener('resize',e=>{const aK=document.querySelector('.width').value,_C=document.querySelector('.height').value;!(aK&&_C)?aF('def'):aF('custom',aK,_C);aG();aD()});window.addEventListener('beforeunload',e=>{(localStorage.getItem('canvasArray')!==JSON.stringify(u)&&!v)&&(e.preventDefault(),v=!0)});_.addEventListener('contextmenu',e=>e.preventDefault());_.addEventListener('pointerdown',e=>{var aL=document.querySelector('.stroke-width').value||1;if(aL!=='0'){var aM=document.querySelector('.color').value;aM!==o&&(o=aM,t++,u[t]=o);aL!==N&&(N=aL,t++,u[t]=N);x=Math.round(e.offsetX);y=Math.round(e.offsetY);t++;u[t]=x;t++;u[t]=y;_.addEventListener('pointermove',m)}else N=aL});_.addEventListener('pointerup',e=>{if(N!=='0'){let a=Math.round(e.offsetX);let b=Math.round(e.offsetY);aC();aG();aD();_.removeEventListener('pointermove',m);t++;u[t]=a;t++;u[t]=b;g.beginPath();g.strokeStyle=o;g.lineWidth=N;g.moveTo(x,y);g.lineTo(a,b);g.stroke();aA()}});B.addEventListener('click',()=>{aC();aB();aG();aD();aA()});d.addEventListener('click',()=>aE());c.addEventListener('click',()=>{aC();aG();u=[];t=-1;localStorage.removeItem('canvasArray');N=1;o='#000000';aA()});f.addEventListener('click',()=>{p=document.querySelector('.width').value;q=document.querySelector('.height').value;aF('custom',p,q);aG();aD()});h.addEventListener('click',()=>z());j.addEventListener('click',()=>{aC();u=JSON.parse(document.querySelector('.new-design').value);aG();aD();aA()});k.addEventListener('click',()=>localStorage.setItem('canvasArray',JSON.stringify(u)));