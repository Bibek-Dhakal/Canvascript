"use strict";const A=a=>typeof a==='number';var _=document.querySelector('.canvas'),c=document.querySelector('.reset'),d=document.querySelector('.generate'),B=document.querySelector('.redo'),f=document.querySelector('.setBtn'),g=_.getContext('2d'),h=document.querySelector('.copy'),I=document.querySelector('.design'),j=document.querySelector('.user-design'),k=document.querySelector('.save'),l=localStorage.getItem('canvasArray'),m=e=>{aB();aF();aC();w(e)};let N=1;let o='#000000';let p;let q;let x;let y;let t=-1;let u=[];let v=!1;function w(C){g&&(g.beginPath(),g.strokeStyle=o,g.lineWidth=+N,g.moveTo(x,y),g.lineTo(C.offsetX,C.offsetY),g.stroke());}function X(n){return A(n)}function Y(){I.select();I.setSelectionRange(0,99999999);navigator.clipboard.writeText(JSON.stringify(u))}function z(){u.length===0?I.value='[ ]':I.value=JSON.stringify(u);}function aA(){for(let i=0;i<4;i++)u.pop();t-=4}function aB(){g===null||g===void 0?void 0:g.clearRect(0,0,_.width,_.height)};function aC(){let i=0;if(g){g.beginPath();g.strokeStyle='#000000';g.lineWidth=1;while (i<u.length) {let _a=u[i];let _b=u[i+1];if(X(_a)&&X(_b)){g.moveTo(_a,_b);g.lineTo(+u[i+2],+u[i+3]);i+=4}else{if(!(X(_a)||X(_b))){g.stroke();g.beginPath();g.strokeStyle=_a;g.lineWidth=+_b;i+=2}else{Math.sign(+_a)?(g.stroke(),g.beginPath(),g.lineWidth=+_a,i++):(g.stroke(),g.beginPath(),g.strokeStyle=`${_a}`,i++);}}};g.stroke()}};function aD(){var D=document.querySelector('.space'),_B=document.createRange(),_c=window.getSelection();let i=0;if(D){D.innerHTML='';D.innerHTML+=`<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '#000000';</div><div>ctx.lineWidth = 1;</div>`;while (i<u.length) {let _A=u[i];let E=u[i+1];if(X(_A)&&X(E)){D.innerHTML+=`<div>ctx.moveTo(${_A}, ${E});</div>`;D.innerHTML+=`<div>ctx.lineTo(${u[i+2]}, ${u[i+3]});</div>`;i+=4}else{if(!(X(_A)||X(E))){D.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${_A}';</div>`;D.innerHTML+=`<div>ctx.lineWidth = '${E}';</div>`;i+=2}else{Math.sign(+_A)?(D.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = '${_A}';</div>`,i++):(D.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${_A}';</div>`,i++);}}};D.innerHTML+='<div>ctx.stroke();</div>';_c===null||_c===void 0?void 0:_c.removeAllRanges();_B.selectNodeContents(D);_c===null||_c===void 0?void 0:_c.addRange(_B)}};function aE(aG,...aH){if(aG==='def'){var _C=window.innerHeight,_d=window.innerWidth;_.width=(_d/100)*70;_.height=(_C/100)*72.5}else{_.width=aH[0];_.height=aH[1]}}function aF(){var aI=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);p=+document.querySelector('.width').value||_.width;q=+document.querySelector('.height').value||_.height;if(g){g.beginPath();g.strokeStyle='#AAAAAA';g.lineWidth=1;for(let x=0;x<=p;x+=aI){g.moveTo(x,0);g.lineTo(x,q)}for(let y=0;y<=q;y+=aI){g.moveTo(0,y);g.lineTo(p,y)}g.stroke()}};aE('def');aF();l!==null&&(u=JSON.parse(l),aC());z();window.addEventListener('resize',e=>{p=+document.querySelector('.width').value;q=+document.querySelector('.height').value;!(p&&q)?aE('def'):aE('custom',p,q);aF();aC()});window.addEventListener('beforeunload',e=>{(localStorage.getItem('canvasArray')!==JSON.stringify(u)&&!v)&&(e.preventDefault(),v=!0)});_.addEventListener('contextmenu',e=>e.preventDefault());_.addEventListener('pointerdown',e=>{var aJ=document.querySelector('.stroke-width').value||1;if(aJ!=='0'){var aK=document.querySelector('.color').value;aK!==o&&(o=aK,t++,u[t]=o);aJ!==N&&(N=aJ,t++,u[t]=N);x=Math.round(e.offsetX);y=Math.round(e.offsetY);t++;u[t]=x;t++;u[t]=y;_.addEventListener('pointermove',m)}else N=aJ});_.addEventListener('pointerup',e=>{if(N!==0){let a=Math.round(e.offsetX);let b=Math.round(e.offsetY);aB();aF();aC();_.removeEventListener('pointermove',m);t++;u[t]=a;t++;u[t]=b;g&&(g.beginPath(),g.strokeStyle=o,g.lineWidth=+N,g.moveTo(x,y),g.lineTo(a,b),g.stroke(),z());}});B===null||B===void 0?void 0:B.addEventListener('click',()=>{aB();aA();aF();aC();z()});d===null||d===void 0?void 0:d.addEventListener('click',()=>aD());c===null||c===void 0?void 0:c.addEventListener('click',()=>{aB();aF();u=[];t=-1;localStorage.removeItem('canvasArray');N=1;o='#000000';z()});f===null||f===void 0?void 0:f.addEventListener('click',()=>{p=+document.querySelector('.width').value;q=+document.querySelector('.height').value;aE('custom',p,q);aF();aC()});h===null||h===void 0?void 0:h.addEventListener('click',()=>Y());j===null||j===void 0?void 0:j.addEventListener('click',()=>{aB();u=JSON.parse(document.querySelector('.design').value);aF();aC();z()});k===null||k===void 0?void 0:k.addEventListener('click',()=>localStorage.setItem('canvasArray',JSON.stringify(u)));