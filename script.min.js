const A=a=>typeof a==='number';var _=document.querySelector('.canvas'),c=document.querySelector('.reset'),d=document.querySelector('.generate'),B=document.querySelector('.redo'),f=document.querySelector('.space'),g=document.querySelector('.setBtn'),h=_.getContext('2d'),I=document.querySelector('.copy'),j=document.querySelector('.design'),k=document.querySelector('.user-design'),l=document.querySelector('.save'),m=localStorage.getItem('canvasArray'),N=e=>{aD();aH();aE();Y(e)};let o=1;let p='#000000';let q;let r;let x;let y;let u=-1;let v=[];let w=!1;let X;function Y(C){h.beginPath();h.strokeStyle=p;h.lineWidth=o>0?o:0;h.moveTo(x,y);h.lineTo(C.offsetX,C.offsetY);h.stroke()}function z(n){return A(n)}function aA(){j.select();j.setSelectionRange(0,99999999);navigator.clipboard.writeText(JSON.stringify(v))}function aB(){v.length===0?j.value='[ ]':j.value=JSON.stringify(v);}function aC(){for(let i=0;i<4;i++)v.pop();u-=4}function aD(){h.clearRect(0,0,_.width,_.height)};function aE(){let i=0;h.beginPath();h.strokeStyle='#000000';h.lineWidth=1;while (i<v.length) {let _a=v[i];let _b=v[i+1];if(z(_a)&&z(_b)){h.moveTo(_a,_b);h.lineTo(v[i+2],v[i+3]);i+=4}else{if(!(z(_a)||z(_b))){h.stroke();h.beginPath();h.strokeStyle=_a;h.lineWidth=+_b;i+=2}else{Math.sign(_a)?(h.stroke(),h.beginPath(),h.lineWidth=_a,i++):(h.stroke(),h.beginPath(),h.strokeStyle=_a,i++);}}};h.stroke()};function aF(){let i=0;f.innerHTML='';f.innerHTML+=`<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '#000000';</div><div>ctx.lineWidth = 1;</div>`;while (i<v.length) {let D=v[i];let _B=v[i+1];if(z(D)&&z(_B)){f.innerHTML+=`<div>ctx.moveTo(${D}, ${_B});</div>`;f.innerHTML+=`<div>ctx.lineTo(${v[i+2]}, ${v[i+3]});</div>`;i+=4}else{if(!(z(D)||z(_B))){f.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${D}';</div>`;f.innerHTML+=`<div>ctx.lineWidth = '${_B}';</div>`;i+=2}else{Math.sign(D)?(f.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = '${D}';</div>`,i++):(f.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${D}';</div>`,i++);}}};f.innerHTML+='<div>ctx.stroke();</div>'};function aG(_A,...E){_A==='def'?(height=window.innerHeight,width=window.innerWidth,_.width=(width/100)*70,_.height=(height/100)*72.5):(_.width=E[0],_.height=E[1])}function aH(){var aI=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);q=document.querySelector('.width').value||_.width;r=document.querySelector('.height').value||_.height;h.beginPath();h.strokeStyle='#AAAAAA';h.lineWidth=1;for(let x=0;x<=q;x+=aI){h.moveTo(x,0);h.lineTo(x,r)}for(let y=0;y<=r;y+=aI){h.moveTo(0,y);h.lineTo(q,y)}h.stroke()}aG('def');aH();m!==null&&(v=JSON.parse(m),aE());aB();window.addEventListener('resize',e=>{const aJ=document.querySelector('.width').value,_c=document.querySelector('.height').value;!(aJ&&_c)?aG('def'):aG('custom',aJ,_c);aH();aE()});window.addEventListener('beforeunload',e=>{(localStorage.getItem('canvasArray')!==JSON.stringify(v)&&!w)&&(e.preventDefault(),w=!0)});_.addEventListener('contextmenu',e=>e.preventDefault());_.addEventListener('pointerdown',e=>{var aK=document.querySelector('.stroke-width').value||1;if(aK!=='0'){var _C=document.querySelector('.color').value;_C!==p&&(p=_C,u++,v[u]=p);aK!==o&&(o=aK,u++,v[u]=o);x=Math.round(e.offsetX);y=Math.round(e.offsetY);u++;v[u]=x;u++;v[u]=y;_.addEventListener('pointermove',N)}else o=aK});_.addEventListener('pointerup',e=>{if(o!=='0'){let a=Math.round(e.offsetX);let b=Math.round(e.offsetY);aD();aH();aE();_.removeEventListener('pointermove',N);u++;v[u]=a;u++;v[u]=b;h.beginPath();h.strokeStyle=p;h.lineWidth=o;h.moveTo(x,y);h.lineTo(a,b);h.stroke();aB()}});B.addEventListener('click',()=>{aD();aC();aH();aE();aB()});d.addEventListener('click',()=>aF());c.addEventListener('click',()=>{aD();aH();v=[];u=-1;localStorage.removeItem('canvasArray');o=1;p='#000000';aB()});g.addEventListener('click',()=>{q=document.querySelector('.width').value;r=document.querySelector('.height').value;aG('custom',q,r);aH();aE()});I.addEventListener('click',()=>aA());k.addEventListener('click',()=>{aD();v=JSON.parse(document.querySelector('.new-design').value);aH();aE();aB()});l.addEventListener('click',()=>localStorage.setItem('canvasArray',JSON.stringify(v)));