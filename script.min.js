const A=a=>typeof a==='number';var _=document.querySelector('.canvas'),c=document.querySelector('.reset'),d=document.querySelector('.generate'),B=document.querySelector('.redo'),f=document.querySelector('.space'),g=document.querySelector('.setBtn'),h=_.getContext('2d'),I=document.querySelector('.copy'),j=document.querySelector('.design'),k=document.querySelector('.user-design'),l=document.querySelector('.save'),m=localStorage.getItem('canvasArray'),N=e=>{aE();aI();aF();z(e)};let o=1;let p;let q='#000000';let r;let s;let t;let x;let y;let w=-1;let X=[];let Y=!1;function z(C){h.beginPath();h.strokeStyle=q;h.lineWidth=o||1;h.moveTo(x,y);h.lineTo(C.offsetX,C.offsetY);h.stroke()}function aA(n){return A(n)}function aB(){j.select();j.setSelectionRange(0,99999999);navigator.clipboard.writeText(`${j.value}`)}function aC(){X.length===0?j.value='[ ]':j.value=`[${X}]`;}function aD(){for(let i=0;i<4;i++)X.pop();w-=4}function aE(){h.clearRect(0,0,_.width,_.height)};function aF(){let i=0;h.beginPath();h.strokeStyle='#000000';h.lineWidth=1;while (i<X.length) {let _a=X[i];let _b=X[i+1];if(aA(_a)&&aA(_b)){h.moveTo(_a,_b);h.lineTo(X[i+2],X[i+3]);i+=4}else{if(!(aA(_a)||aA(_b))){h.stroke();h.beginPath();h.strokeStyle=_a;h.lineWidth=_b;i+=2}else{Math.sign(_a)?(h.stroke(),h.beginPath(),h.lineWidth=_a,i++):(h.stroke(),h.beginPath(),h.strokeStyle=_a,i++);}}};h.stroke()};function aG(){let i=0;f.innerHTML='';f.innerHTML+=`<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '#000000';</div><div>ctx.lineWidth = 1;</div>`;while (i<X.length) {let D=X[i];let _B=X[i+1];if(aA(D)&&aA(_B)){f.innerHTML+=`<div>ctx.moveTo(${D}, ${_B});</div>`;f.innerHTML+=`<div>ctx.lineTo(${X[i+2]}, ${X[i+3]});</div>`;i+=4}else{if(!(aA(D)||aA(_B))){f.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${D}';</div>`;f.innerHTML+=`<div>ctx.lineWidth = '${_B}';</div>`;i+=2}else{Math.sign(D)?(f.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = '${D}';</div>`,i++):(f.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${D}';</div>`,i++);}}};f.innerHTML+='<div>ctx.stroke();</div>'};function aH(_A,...E){_A==='def'?(height=window.innerHeight,width=window.innerWidth,_.width=(width/100)*70,_.height=(height/100)*72.5):(_.width=E[0],_.height=E[1])}function aI(){var aJ=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);s=document.querySelector('.width').value||_.width;t=document.querySelector('.height').value||_.height;h.beginPath();h.strokeStyle='#AAAAAA';h.lineWidth=1;for(let x=0;x<=s;x+=aJ){h.moveTo(x,0);h.lineTo(x,t)}for(let y=0;y<=t;y+=aJ){h.moveTo(0,y);h.lineTo(s,y)}h.stroke()}aH('def');aI();m!==null&&(X=JSON.parse(m),aF());aC();window.addEventListener('resize',e=>{const aK=document.querySelector('.width').value,_c=document.querySelector('.height').value;!(aK&&_c)?aH('def'):aH('custom',aK,_c);aI();aF()});window.addEventListener('beforeunload',e=>{(localStorage.getItem('canvasArray')!==JSON.stringify(X)&&!Y)&&(e.preventDefault(),Y=!0)});_.addEventListener('contextmenu',e=>e.preventDefault());_.addEventListener('pointerdown',e=>{r=document.querySelector('.color').value;p=document.querySelector('.stroke-width').value||1;r!==q&&(q=r,w++,X[w]=q);p!==o&&(o=p,w++,X[w]=o);x=e.offsetX;y=e.offsetY;w++;X[w]=x;w++;X[w]=y;_.addEventListener('pointermove',N)});_.addEventListener('pointerup',e=>{let a=e.offsetX;let b=e.offsetY;aE();aI();aF();_.removeEventListener('pointermove',N);w++;X[w]=a;w++;X[w]=b;h.beginPath();h.strokeStyle=q;h.lineWidth=o;h.moveTo(x,y);h.lineTo(a,b);h.stroke();aC()});B.addEventListener('click',()=>{aE();aD();aI();aF();aC()});d.addEventListener('click',()=>aG());c.addEventListener('click',()=>{aE();aI();X=[];w=-1;localStorage.removeItem('canvasArray');aC()});g.addEventListener('click',()=>{s=document.querySelector('.width').value;t=document.querySelector('.height').value;aH('custom',s,t);aI();aF()});I.addEventListener('click',()=>aB());k.addEventListener('click',()=>{aE();X=JSON.parse(document.querySelector('.new-design').value);aI();aF();aC()});l.addEventListener('click',()=>localStorage.setItem('canvasArray',JSON.stringify(X)));
