var A=a=>typeof a==='number';var _=document.querySelector('.canvas'),c=document.querySelector('.reset'),d=document.querySelector('.generate'),B=document.querySelector('.redo'),f=document.querySelector('.setBtn'),g=_.getContext('2d'),h=document.querySelector('.copy'),I=document.querySelector('.design'),j=document.querySelector('.user-design'),k=document.querySelector('.save'),l=localStorage.getItem('canvasArray'),m=function(e){aB();aF();aC();w(e)},N=1,o='#000000',p,q,x,y,t=-1,u=[],v=!1;function w(C){g&&(g.beginPath(),g.strokeStyle=o,g.lineWidth=+N,g.moveTo(x,y),g.lineTo(C.offsetX,C.offsetY),g.stroke());}function X(n){return A(n)}function Y(){I.select();I.setSelectionRange(0,99999999);navigator.clipboard.writeText(JSON.stringify(u))}function z(){u.length===0?I.value='[ ]':I.value=JSON.stringify(u);}function aA(){for(var i=0;i<4;i++)u.pop();t-=4}function aB(){g===null||g===void 0?void 0:g.clearRect(0,0,_.width,_.height)};function aC(){var i=0;if(g){g.beginPath();g.strokeStyle='#000000';g.lineWidth=1;while (i<u.length) {var _b=u[i],_c=u[i+1];if(X(_b)&&X(_c)){g.moveTo(_b,_c);g.lineTo(+u[i+2],+u[i+3]);i+=4}else{if(!(X(_b)||X(_c))){g.stroke();g.beginPath();g.strokeStyle=_b;g.lineWidth=+_c;i+=2}else{Math.sign(+_b)?(g.stroke(),g.beginPath(),g.lineWidth=+_b,i++):(g.stroke(),g.beginPath(),g.strokeStyle=`${_b}`,i++);}}};g.stroke()}};function aD(){var _a=document.querySelector('.space'),D=document.createRange(),_C=window.getSelection(),i=0;if(_a){_a.innerHTML='';_a.innerHTML+='<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = \'#000000\';</div><div>ctx.lineWidth = 1;</div>';while (i<u.length) {var E=u[i],F=u[i+1];if(X(E)&&X(F)){_a.innerHTML+='<div>ctx.moveTo('.concat(E,', ').concat(F,');</div>');_a.innerHTML+='<div>ctx.lineTo('.concat(u[i+2],', ').concat(u[i+3],');</div>');i+=4}else{if(!(X(E)||X(F))){_a.innerHTML+='<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = \''.concat(E,'\';</div>');_a.innerHTML+='<div>ctx.lineWidth = \''.concat(F,'\';</div>');i+=2}else{Math.sign(+E)?(_a.innerHTML+='<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = \''.concat(E,'\';</div>'),i++):(_a.innerHTML+='<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = \''.concat(E,'\';</div>'),i++);}}};_a.innerHTML+='<div>ctx.stroke();</div>';_C===null||_C===void 0?void 0:_C.removeAllRanges();D.selectNodeContents(_a);_C===null||_C===void 0?void 0:_C.addRange(D)}};function aE(_A){var _B=[];for(var aG=1;aG<arguments.length;aG++)_B[aG-1]=arguments[aG];if(_A==='def'){var _d=window.innerHeight,_e=window.innerWidth;_.width=(_e/100)*70;_.height=(_d/100)*72.5}else{_.width=_B[0];_.height=_B[1]}}function aF(){var aH=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);p=+document.querySelector('.width').value||_.width;q=+document.querySelector('.height').value||_.height;if(g){g.beginPath();g.strokeStyle='#AAAAAA';g.lineWidth=1;for(var aI=0;aI<=p;aI+=aH){g.moveTo(aI,0);g.lineTo(aI,q)}for(var aJ=0;aJ<=q;aJ+=aH){g.moveTo(0,aJ);g.lineTo(p,aJ)}g.stroke()}}aE('def');aF();l!==null&&(u=JSON.parse(l),aC());z();window.addEventListener('resize',function(e){p=+document.querySelector('.width').value;q=+document.querySelector('.height').value;!(p&&q)?aE('def'):aE('custom',p,q);aF();aC()});window.addEventListener('beforeunload',function(e){(localStorage.getItem('canvasArray')!==JSON.stringify(u)&&!v)&&(e.preventDefault(),v=!0)});_.addEventListener('contextmenu',function(e){e.preventDefault()});_.addEventListener('pointerdown',function(e){var aK=document.querySelector('.stroke-width').value||1;if(aK!=='0'){var aL=document.querySelector('.color').value;aL!==o&&(o=aL,t++,u[t]=o);aK!==N&&(N=aK,t++,u[t]=N);x=Math.round(e.offsetX);y=Math.round(e.offsetY);t++;u[t]=x;t++;u[t]=y;_.addEventListener('pointermove',m)}else N=aK});_.addEventListener('pointerup',function(e){if(N!==0){var a=Math.round(e.offsetX),b=Math.round(e.offsetY);aB();aF();aC();_.removeEventListener('pointermove',m);t++;u[t]=a;t++;u[t]=b;g&&(g.beginPath(),g.strokeStyle=o,g.lineWidth=+N,g.moveTo(x,y),g.lineTo(a,b),g.stroke(),z());}});B===null||B===void 0?void 0:B.addEventListener('click',function(){aB();aA();aF();aC();z()});d===null||d===void 0?void 0:d.addEventListener('click',function(){aD()});c===null||c===void 0?void 0:c.addEventListener('click',function(){aB();aF();u=[];t=-1;localStorage.removeItem('canvasArray');N=1;o='#000000';z()});f===null||f===void 0?void 0:f.addEventListener('click',function(){p=+document.querySelector('.width').value;q=+document.querySelector('.height').value;aE('custom',p,q);aF();aC()});h===null||h===void 0?void 0:h.addEventListener('click',function(){Y()});j===null||j===void 0?void 0:j.addEventListener('click',function(){aB();u=JSON.parse(document.querySelector('.new-design').value);aF();aC();z()});k===null||k===void 0?void 0:k.addEventListener('click',function(){localStorage.setItem('canvasArray',JSON.stringify(u))});