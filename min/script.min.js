"use strict";const{isArray:A}=Array;const _=a=>typeof a==='number';var c=document.querySelector('.canvas'),d=document.querySelector('.reset'),B=document.querySelector('.generate'),f=document.querySelector('.undo'),g=document.querySelector('.setBtn'),h=c.getContext('2d'),I=document.querySelector('.copy'),j=document.querySelector('.design'),k=document.querySelector('.user-design'),l=document.querySelector('.save'),m=document.querySelector('.curve-input-container'),N=localStorage.getItem('canvasArray'),o=e=>{aD();aH();aE();Y(e)};let p='1';let q='#000000';let r;let s;let x;let y;let v=-1;let w=[];let X=!1;function Y(C){h&&(h.beginPath(),h.strokeStyle=q,h.lineWidth=+p,h.moveTo(x,y),h.lineTo(C.offsetX,C.offsetY),h.stroke());}function z(n){return _(n)}function aA(){j.select();j.setSelectionRange(0,99999999);navigator.clipboard.writeText(JSON.stringify(w))}function aB(){w.length===0?j.value='[ ]':j.value=JSON.stringify(w);}function aC(){var _a=w[w.length-1];if(z(_a)){for(let i=0;i<4;i++)w.pop();;v-=4}else A(_a)&&(w.pop(),v--);};function aD(){h===null||h===void 0?void 0:h.clearRect(0,0,c.width,c.height)};function aE(){let i=0;if(h){h.beginPath();h.strokeStyle='#000000';h.lineWidth=1;while (i<w.length) {let D=w[i];let _b=w[i+1];if(z(D)&&z(_b)){h.moveTo(+D,+_b);h.lineTo(+w[i+2],+w[i+3]);i+=4}else if(A(D)){h.moveTo(D[0],D[1]);h.quadraticCurveTo(D[2],D[3],D[4],D[5]);i++}else{if(!(z(D)||z(_b))&&!A(_b)){h.stroke();h.beginPath();h.strokeStyle=`${D}`;h.lineWidth=+_b;i+=2}else{Math.sign(+D)?(h.stroke(),h.beginPath(),h.lineWidth=+D,i++):(h.stroke(),h.beginPath(),h.strokeStyle=`${D}`,i++);}}};h.stroke()}};function aF(){var _A=document.querySelector('.space'),_B=document.createRange(),_c=window.getSelection();let i=0;if(_A){_A.innerHTML='';_A.innerHTML+=`<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '#000000';</div><div>ctx.lineWidth = 1;</div>`;while (i<w.length) {let E=w[i];let aJ=w[i+1];if(z(E)&&z(aJ)){_A.innerHTML+=`<div>ctx.moveTo(${E}, ${aJ});</div>`;_A.innerHTML+=`<div>ctx.lineTo(${w[i+2]}, ${w[i+3]});</div>`;i+=4}else if(A(E)){_A.innerHTML+=`<div>ctx.moveTo(${E[0]}, ${E[1]});</div>`;_A.innerHTML+=`<div>ctx.quadraticCurveTo(${E[2]}, ${E[3]}, ${E[4]}, ${E[5]});</div>`;i++}else{if(!(z(E)||z(aJ))&&!A(aJ)){_A.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${E}';</div>`;_A.innerHTML+=`<div>ctx.lineWidth = '${aJ}';</div>`;i+=2}else{Math.sign(+E)?(_A.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = '${E}';</div>`,i++):(_A.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${E}';</div>`,i++);}}};_A.innerHTML+='<div>ctx.stroke();</div>';_c===null||_c===void 0?void 0:_c.removeAllRanges();_B.selectNodeContents(_A);_c===null||_c===void 0?void 0:_c.addRange(_B)}};function aG(aK,...aL){if(aK==='def'){var _C=window.innerHeight,_d=window.innerWidth;c.width=(_d/100)*70;c.height=(_C/100)*72.5}else{c.width=aL[0];c.height=aL[1]}}function aH(){var aM=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);r=+document.querySelector('.width').value||c.width;s=+document.querySelector('.height').value||c.height;if(h){h.beginPath();h.strokeStyle='#AAAAAA';h.lineWidth=1;for(let x=0;x<=r;x+=aM){h.moveTo(x,0);h.lineTo(x,s)}for(let y=0;y<=s;y+=aM){h.moveTo(0,y);h.lineTo(r,y)}h.stroke()}};function aI(){var aN=document.querySelector('.curveX'),aO=document.querySelector('.curveY'),aP=w[w.length-1];let _D=[];if(w.length!==0){if(z(aP)){for(let i=0;i<4;i++)_D.push(w.pop());;v=v-3;_D.reverse()};if(A(aP)){for(let i=0;i<4;i++)_D.push(aP[i]);;w.pop()};_D.push((c.width/100)* +aN.value);_D.push((c.height/100)* +aO.value);w.push(_D)}};aG('def');aH();N!==null&&(w=JSON.parse(N),aE());aB();window.addEventListener('resize',e=>{r=+document.querySelector('.width').value;s=+document.querySelector('.height').value;!(r&&s)?aG('def'):aG('custom',r,s);aD();aH();aE()});window.addEventListener('beforeunload',e=>{(localStorage.getItem('canvasArray')!==JSON.stringify(w)&&!X)&&(e.preventDefault(),X=!0)});c.addEventListener('contextmenu',e=>e.preventDefault());c.addEventListener('pointerdown',e=>{var aQ=document.querySelector('.stroke-width').value,aR=document.querySelector('.color').value;aR!==q&&(q=aR,v++,w[v]=q);(aQ&&aQ!==p)&&(p=aQ,v++,w[v]=p);x=Math.round(e.offsetX);y=Math.round(e.offsetY);v++;w[v]=x;v++;w[v]=y;c.addEventListener('pointermove',o)});c.addEventListener('pointerup',e=>{let a=Math.round(e.offsetX);let b=Math.round(e.offsetY);aD();aH();aE();c.removeEventListener('pointermove',o);v++;w[v]=a;v++;w[v]=b;h&&(h.beginPath(),h.strokeStyle=q,h.lineWidth=+p,h.moveTo(x,y),h.lineTo(a,b),h.stroke());;aB()});f===null||f===void 0?void 0:f.addEventListener('click',()=>{aD();aC();aH();aE();aB()});B===null||B===void 0?void 0:B.addEventListener('click',()=>aF());d===null||d===void 0?void 0:d.addEventListener('click',()=>{aD();aH();w=[];v=-1;localStorage.removeItem('canvasArray');p='1';q='#000000';aB()});g===null||g===void 0?void 0:g.addEventListener('click',()=>{r=+document.querySelector('.width').value;s=+document.querySelector('.height').value;aG('custom',r,s);aH();aE()});I===null||I===void 0?void 0:I.addEventListener('click',()=>aA());l===null||l===void 0?void 0:l.addEventListener('click',()=>localStorage.setItem('canvasArray',JSON.stringify(w)));k===null||k===void 0?void 0:k.addEventListener('click',()=>{aD();w=JSON.parse(document.querySelector('.design').value);aH();aE();aB()});m.addEventListener('input',e=>{var aS=e.target,aT=aS.value;if(aS.classList.contains('curveX')){var aU=document.querySelector('.curveXupdate');aU.innerHTML=aT}else{var _e=document.querySelector('.curveYupdate');_e.innerHTML=aT};aD();aH();aI();aE();aB()});