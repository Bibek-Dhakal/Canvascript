"use strict";const{isArray:A}=Array;const _=a=>typeof a==='number';var c=document.querySelector('.canvas'),d=document.querySelector('.reset'),B=document.querySelector('.generate'),f=document.querySelector('.redo'),g=document.querySelector('.setBtn'),h=c.getContext('2d'),I=document.querySelector('.copy'),j=document.querySelector('.design'),k=document.querySelector('.user-design'),l=document.querySelector('.save'),m=document.querySelector('.curve-input-container'),N=localStorage.getItem('canvasArray'),o=e=>{aE();aI();aF();z(e)};let p='1';let q='#000000';let r;let s;let x;let y;let v=-1;let w=[];let X=!1;let Y=-1;function z(C){h&&(h.beginPath(),h.strokeStyle=q,h.lineWidth=+p,h.moveTo(x,y),h.lineTo(C.offsetX,C.offsetY),h.stroke());}function aA(n){return _(n)}function aB(){j.select();j.setSelectionRange(0,99999999);navigator.clipboard.writeText(JSON.stringify(w))}function aC(){w.length===0?j.value='[ ]':j.value=JSON.stringify(w);}function aD(){var _a=w[w.length-1];if(aA(_a)){for(let i=0;i<4;i++)w.pop();;v-=4}else A(_a)&&(w.pop(),v--);};function aE(){h===null||h===void 0?void 0:h.clearRect(0,0,c.width,c.height)};function aF(){let i=0;if(h){h.beginPath();h.strokeStyle='#000000';h.lineWidth=1;while (i<w.length) {let D=w[i];let _b=w[i+1];if(aA(D)&&aA(_b)){h.moveTo(+D,+_b);h.lineTo(+w[i+2],+w[i+3]);i+=4}else if(A(D)){h.moveTo(D[0],D[1]);h.quadraticCurveTo(D[2],D[3],D[4],D[5]);i++}else{if(!(aA(D)||aA(_b))&&!A(_b)){h.stroke();h.beginPath();h.strokeStyle=`${D}`;h.lineWidth=+_b;i+=2}else{Math.sign(+D)?(h.stroke(),h.beginPath(),h.lineWidth=+D,i++):(h.stroke(),h.beginPath(),h.strokeStyle=`${D}`,i++);}}};h.stroke()}};function aG(){var _A=document.querySelector('.space'),_B=document.createRange(),_c=window.getSelection();let i=0;if(_A){_A.innerHTML='';_A.innerHTML+=`<div>const canvas = document.querySelector(\'canvas\');</div><div>const ctx = canvas.getContext(\'2d\');</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '#000000';</div><div>ctx.lineWidth = 1;</div>`;while (i<w.length) {let E=w[i];let aK=w[i+1];if(aA(E)&&aA(aK)){_A.innerHTML+=`<div>ctx.moveTo(${E}, ${aK});</div>`;_A.innerHTML+=`<div>ctx.lineTo(${w[i+2]}, ${w[i+3]});</div>`;i+=4}else if(A(E)){_A.innerHTML+=`<div>ctx.moveTo(${E[0]}, ${E[1]});</div>`;_A.innerHTML+=`<div>ctx.quadraticCurveTo(${E[2]}, ${E[3]}, ${E[4]}, ${E[5]});</div>`;i++}else{if(!(aA(E)||aA(aK))&&!A(aK)){_A.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${E}';</div>`;_A.innerHTML+=`<div>ctx.lineWidth = '${aK}';</div>`;i+=2}else{Math.sign(+E)?(_A.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.lineWidth = '${E}';</div>`,i++):(_A.innerHTML+=`<div>ctx.stroke();</div><div>ctx.beginPath();</div><div>ctx.strokeStyle = '${E}';</div>`,i++);}}};_A.innerHTML+='<div>ctx.stroke();</div>';_c===null||_c===void 0?void 0:_c.removeAllRanges();_B.selectNodeContents(_A);_c===null||_c===void 0?void 0:_c.addRange(_B)}};function aH(aL,...aM){if(aL==='def'){var _C=window.innerHeight,_d=window.innerWidth;c.width=(_d/100)*70;c.height=(_C/100)*72.5}else{c.width=aM[0];c.height=aM[1]}}function aI(){var aN=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize);r=+document.querySelector('.width').value||c.width;s=+document.querySelector('.height').value||c.height;if(h){h.beginPath();h.strokeStyle='#AAAAAA';h.lineWidth=1;for(let x=0;x<=r;x+=aN){h.moveTo(x,0);h.lineTo(x,s)}for(let y=0;y<=s;y+=aN){h.moveTo(0,y);h.lineTo(r,y)}h.stroke()}};function aJ(){var aO=document.querySelector('.curveX'),aP=document.querySelector('.curveY'),aQ=w[w.length-1];let _D=[];if(w.length!==0){if(aA(aQ)){for(let i=0;i<4;i++)_D.push(w.pop());;v=v-3;_D.reverse()};if(A(aQ)){for(let i=0;i<4;i++)_D.push(aQ[i]);;w.pop()};_D.push((c.width/100)* +aO.value);_D.push((c.height/100)* +aP.value);w.push(_D)}};aH('def');aI();N!==null&&(w=JSON.parse(N),aF());aC();window.addEventListener('resize',e=>{r=+document.querySelector('.width').value;s=+document.querySelector('.height').value;!(r&&s)?aH('def'):aH('custom',r,s);aE();aI();aF()});window.addEventListener('beforeunload',e=>{(localStorage.getItem('canvasArray')!==JSON.stringify(w)&&!X)&&(e.preventDefault(),X=!0)});c.addEventListener('contextmenu',e=>e.preventDefault());c.addEventListener('pointerdown',e=>{var aR=document.querySelector('.stroke-width').value,aS=document.querySelector('.color').value;Y++;(document.getElementById(`${Y}`))===null&&(m.id=`${Y}`,m.innerHTML=`<div class="m-1 text-center">Set curvature of line on X and Y axes ðŸ‘‡</div><div class="d-flex justify-content-center">X (%):<input class="form-range w-25 curveX"type=range value=0><span class=curveXupdate>0</span></div><div class="d-flex justify-content-center mb-2">Y (%):<input class="form-range w-25 curveY"type=range value=0><span class=curveYupdate>50</span></div>`);aS!==q&&(q=aS,v++,w[v]=q);(aR&&aR!==p)&&(p=aR,v++,w[v]=p);x=Math.round(e.offsetX);y=Math.round(e.offsetY);v++;w[v]=x;v++;w[v]=y;c.addEventListener('pointermove',o)});c.addEventListener('pointerup',e=>{let a=Math.round(e.offsetX);let b=Math.round(e.offsetY);aE();aI();aF();c.removeEventListener('pointermove',o);v++;w[v]=a;v++;w[v]=b;h&&(h.beginPath(),h.strokeStyle=q,h.lineWidth=+p,h.moveTo(x,y),h.lineTo(a,b),h.stroke());;aC()});f===null||f===void 0?void 0:f.addEventListener('click',()=>{aE();aD();aI();aF();aC()});B===null||B===void 0?void 0:B.addEventListener('click',()=>aG());d===null||d===void 0?void 0:d.addEventListener('click',()=>{aE();aI();w=[];Y=v=-1;localStorage.removeItem('canvasArray');p='1';q='#000000';m.id=`${Y}`;m.innerHTML=`<div class="text-center m-1">Set curvature of line on X and Y axes ðŸ‘‡</div> <div class="d-flex justify-content-center"> X (%):<input type="range" class="form-range w-25 curveX" value="0"><span class="curveXupdate">0</span> </div> <div class="d-flex justify-content-center mb-2"> Y (%):<input type="range" value="0" class="form-range w-25 curveY"><span class="curveYupdate">50</span> </div>`;aC()});g===null||g===void 0?void 0:g.addEventListener('click',()=>{r=+document.querySelector('.width').value;s=+document.querySelector('.height').value;aH('custom',r,s);aI();aF()});I===null||I===void 0?void 0:I.addEventListener('click',()=>aB());l===null||l===void 0?void 0:l.addEventListener('click',()=>localStorage.setItem('canvasArray',JSON.stringify(w)));k===null||k===void 0?void 0:k.addEventListener('click',()=>{aE();w=JSON.parse(document.querySelector('.design').value);aI();aF();aC()});m.addEventListener('input',e=>{var aT=e.target,aU=aT.value;if(aT.classList.contains('curveX')){var aV=document.querySelector('.curveXupdate');aV.innerHTML=aU}else{var _e=document.querySelector('.curveYupdate');_e.innerHTML=aU};aE();aI();aJ();aF();aC()});